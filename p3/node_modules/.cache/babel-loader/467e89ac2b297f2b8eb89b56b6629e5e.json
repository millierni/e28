{"remainingRequest":"/opt/lampp/htdocs/e28/p3/node_modules/thread-loader/dist/cjs.js!/opt/lampp/htdocs/e28/p3/node_modules/babel-loader/lib/index.js!/opt/lampp/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/opt/lampp/htdocs/e28/p3/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/opt/lampp/htdocs/e28/p3/src/components/pages/AccountPage.vue?vue&type=script&lang=js","dependencies":[{"path":"/opt/lampp/htdocs/e28/p3/src/components/pages/AccountPage.vue","mtime":1620780094541},{"path":"/opt/lampp/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/e28/p3/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/e28/p3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/opt/lampp/htdocs/e28/p3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/e28/p3/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgYXhpb3MgfSBmcm9tICJAL2NvbW1vbi9hcHAuanMiOwppbXBvcnQgVmFsaWRhdG9yIGZyb20gInZhbGlkYXRvcmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhOiB7CiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9LAogICAgICBlcnJvcnM6IG51bGwsCiAgICAgIG90aGVyRXJyb3JzOiBudWxsLAogICAgICBpc0FkZGVkOiBmYWxzZSwKICAgICAgaXNXYXJuaW5nOiBmYWxzZSwKCiAgICAgIC8qIFN0b3JlIGxpbmtzIGluIGFuIGFycmF5IHRvIG1haW50YWluIG9yZGVyICovCiAgICAgIGxpbmtzOiBbIlJlZ2lzdGVyIl0sCgogICAgICAvKiBNYXAgbGlua3MgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbXBvbmVudCAqLwogICAgICBwYXRoczogewogICAgICAgIFJlZ2lzdGVyOiAiUmVnaXN0ZXIiCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdXNlcjogZnVuY3Rpb24gdXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXI7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgIHZhciB2YWxpZGF0b3IgPSBuZXcgVmFsaWRhdG9yKHRoaXMuZGF0YSwgewogICAgICAgIGVtYWlsOiAicmVxdWlyZWR8ZW1haWwiLAogICAgICAgIHBhc3N3b3JkOiAicmVxdWlyZWR8YmV0d2Vlbjo4LDEwMCIKICAgICAgfSk7CgogICAgICBpZiAodmFsaWRhdG9yLmZhaWxzKCkpIHsKICAgICAgICB0aGlzLmVycm9ycyA9IHZhbGlkYXRvci5lcnJvcnMuYWxsKCk7CiAgICAgICAgdGhpcy5pc1dhcm5pbmcgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3JzID0gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRvci5wYXNzZXMoKTsKICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy52YWxpZGF0ZSgpKSB7CiAgICAgICAgYXhpb3MucG9zdCgibG9naW4iLCB0aGlzLmRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5hdXRoZW50aWNhdGVkKSB7CiAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoInNldFVzZXIiLCByZXNwb25zZS5kYXRhLnVzZXIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMub3RoZXJFcnJvcnMgPSByZXNwb25zZS5kYXRhLmVycm9yczsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QoImxvZ291dCIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMyLiRzdG9yZS5jb21taXQoInNldFVzZXIiLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/opt/lampp/htdocs/e28/p3/src/components/pages/AccountPage.vue"],"names":[],"mappings":"AA8DA,SAAS,KAAT,QAAsB,iBAAtB;AACA,OAAO,SAAP,MAAsB,aAAtB;AAEA,eAAe;AACX,EAAA,IADW,kBACJ;AACH,WAAO;AACH,MAAA,IAAI,EAAE;AACF,QAAA,KAAK,EAAE,EADL;AAEF,QAAA,QAAQ,EAAE;AAFR,OADH;AAKH,MAAA,MAAM,EAAE,IALL;AAMH,MAAA,WAAW,EAAE,IANV;AAOH,MAAA,OAAO,EAAE,KAPN;AAQH,MAAA,SAAS,EAAE,KARR;;AAUH;AACA,MAAA,KAAK,EAAE,CAAC,UAAD,CAXJ;;AAaH;AACA,MAAA,KAAK,EAAE;AACH,QAAA,QAAQ,EAAE;AADP;AAdJ,KAAP;AAkBH,GApBU;AAsBX,EAAA,QAAQ,EAAE;AACN,IAAA,IADM,kBACC;AACH,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAzB;AACH;AAHK,GAtBC;AA4BX,EAAA,OAAO,EAAE;AACL,IAAA,QADK,sBACM;AACP,UAAI,SAAQ,GAAI,IAAI,SAAJ,CAAc,KAAK,IAAnB,EAAyB;AACrC,QAAA,KAAK,EAAE,gBAD8B;AAErC,QAAA,QAAQ,EAAE;AAF2B,OAAzB,CAAhB;;AAKA,UAAI,SAAS,CAAC,KAAV,EAAJ,EAAuB;AACnB,aAAK,MAAL,GAAc,SAAS,CAAC,MAAV,CAAiB,GAAjB,EAAd;AACA,aAAK,SAAL,GAAiB,IAAjB;AACJ,OAHA,MAGO;AACH,aAAK,MAAL,GAAc,IAAd;AACJ;;AACA,aAAO,SAAS,CAAC,MAAV,EAAP;AACH,KAdI;AAgBL,IAAA,KAhBK,mBAgBG;AAAA;;AACJ,UAAI,KAAK,QAAL,EAAJ,EAAqB;AACjB,QAAA,KAAK,CAAC,IAAN,CAAW,OAAX,EAAoB,KAAK,IAAzB,EAA+B,IAA/B,CAAoC,UAAC,QAAD,EAAc;AAC9C,cAAI,QAAQ,CAAC,IAAT,CAAc,aAAlB,EAAiC;AAC7B,YAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,QAAQ,CAAC,IAAT,CAAc,IAA5C;AACJ,WAFA,MAEO;AACH,YAAA,KAAI,CAAC,WAAL,GAAmB,QAAQ,CAAC,IAAT,CAAc,MAAjC;AACJ;AACH,SAND;AAOJ;AACH,KA1BI;AA4BL,IAAA,MA5BK,oBA4BI;AAAA;;AACL,MAAA,KAAK,CAAC,IAAN,CAAW,QAAX,EAAqB,IAArB,CAA0B,UAAC,QAAD,EAAc;AACpC,YAAI,QAAQ,CAAC,IAAT,CAAc,OAAlB,EAA2B;AACvB,UAAA,MAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,KAA9B;AACJ;AACH,OAJD;AAKH;AAlCI;AA5BE,CAAf","sourcesContent":["<template>\n    <div id=\"account-page\">\n        <div v-if=\"user\">\n            <h2>\n                Hi, <span data-test=\"name\">{{ user.name }}</span>!\n            </h2>\n            <button data-test=logout-button v-on:click=\"logout\">Logout</button>\n        </div>\n\n        <div v-else>\n            <div>\n                <h2>Login</h2>\n                <div>\n                    <label>\n                        Email:\n                        <input \n                            data-test=\"login-email\"\n                            type=\"text\" \n                            v-model=\"data.email\" \n                            v-on:blur=\"validate\"\n                            />\n                    </label>\n                    <div v-if=\"errors\">\n                        <p v-if=\"errors.email\">{{ errors.email[0] }}</p>\n                    </div>\n                </div>\n\n                <div>\n                    <label>\n                        Password:\n                        <input\n                        data-test=\"login-password\"\n                            type=\"password\" \n                            v-model=\"data.password\"\n                            v-on:blur=\"validate\"\n                            />\n                    </label>\n                    <div v-if=\"errors\">\n                        <p v-if=\"errors.password\">{{ errors.password[0] }}</p>\n                    </div>                    \n                </div>\n\n                <div class=\"alert-danger\" v-if=\"otherErrors\">\n                    {{ otherErrors[0] }}\n                </div>\n\n                <button data-test=login-button v-on:click=\"login\">Login</button>\n            </div>\n\n            <ul>\n                <router-link\n                v-for=\"link in links\"\n                v-bind:key=\"link\"\n                v-bind:to=\"paths[link]\">\n                    <span class=\"page\">{{ link }}</span>\n                </router-link>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { axios } from \"@/common/app.js\";\nimport Validator from \"validatorjs\";\n\nexport default {\n    data() {\n        return {\n            data: {\n                email: \"\",\n                password: \"\",\n            },\n            errors: null,\n            otherErrors: null,\n            isAdded: false,\n            isWarning: false,\n\n            /* Store links in an array to maintain order */\n            links: [\"Register\"],\n\n            /* Map links to the appropriate component */\n            paths: {\n                Register: \"Register\",\n            },\n        };\n    },\n\n    computed: {\n        user() {\n            return this.$store.state.user;\n        },\n    },\n\n    methods: {\n        validate() {\n            let validator = new Validator(this.data, {\n                email: \"required|email\",\n                password: \"required|between:8,100\",\n            });\n\n            if (validator.fails()) {\n                this.errors = validator.errors.all();\n                this.isWarning = true;\n            } else {\n                this.errors = null;\n            }\n            return validator.passes();\n        },\n\n        login() {\n            if (this.validate()) {\n                axios.post(\"login\", this.data).then((response) => {\n                    if (response.data.authenticated) {\n                        this.$store.commit(\"setUser\", response.data.user);\n                    } else {\n                        this.otherErrors = response.data.errors;\n                    }\n                });\n            }\n        },\n\n        logout() {\n            axios.post(\"logout\").then((response) => {\n                if (response.data.success) {\n                    this.$store.commit(\"setUser\", false);\n                }\n            });\n        },\n    },\n};\n</script>"],"sourceRoot":""}]}